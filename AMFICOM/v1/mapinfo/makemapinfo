HOME=.
LIB=$(HOME)\..\AMFICOMCommon
LIBSRC=$(HOME)\..\AMFICOMCommon\src
EXTLIB=d:\lib91
ORACLE_HOME=d:\oracle\ora91
SRC=$(HOME)\src
CLASSES=$(HOME)\classes
JAVA_HOME=d:\java\j2sdk1.4.1_03

JIKES= d:\java\jikes-1.21\bin\jikes.exe
JIKESFLAGS= \
	-bootclasspath $(JAVA_HOME)/jre/lib/rt.jar \
	-deprecation \
	+E \
	+DR=$(CLASSES)\_dependencies.txt \
	+F \
	+P \
	+Peffective-java \
	+Pmodifier-order \
	+Predundant-modifiers \
	+Pno-switchcheck \
	+Pnaming-convention \
	+T=4

JAVAC=D:\java\j2sdk_nb\j2sdk1.4.2\bin\javac -source 1.4 -target 1.4 -nowarn
JAR=jar

#COMPILER=$(JIKES) $(JIKESFLAGS)
COMPILER=$(JAVAC)

TARGET=$(LIB)\mapinfoimpl.jar
TARGET_SRC=$(LIBSRC)\mapinfosource.jar

SERVERCP=$(LIB)\corbaportable.jar;$(LIB)\corba.jar
CLIENTCP=$(LIB)\util.jar;$(LIB)\filter.jar;$(LIB)\configuration.jar;$(LIB)\general.jar;$(LIB)\generalclient.jar;$(LIB)\administrate.jar;$(LIB)\configureclient.jar;$(LIB)\map.jar;$(LIB)\mapview.jar;$(LIB)\mapclient.jar;$(LIB)\mapviewclient.jar;$(LIB)\scheme.jar

LAYOUTCP=$(EXTLIB)\layout.jar;$(EXTLIB)\kunststoff.jar
SPATIALCP=$(EXTLIB)\ofx.spatialfx.jar
REPORTCP=$(EXTLIB)\jfreechartK.jar
JGRAPHCP=$(EXTLIB)\jgraphpad.jar
MAPINFOCP=$(EXTLIB)\mapinfo\common\jdom.jar;$(EXTLIB)\mapinfo\common\log4j.jar;$(EXTLIB)\mapinfo\common\mijts.jar;$(EXTLIB)\mapinfo\common\mijsptaglibs.jar;$(EXTLIB)\mapinfo\common\midtds.jar;$(EXTLIB)\mapinfo\common\xalan.jar;$(EXTLIB)\mapinfo\common\micsys.jar;$(EXTLIB)\mapinfo\common\miutil.jar;$(EXTLIB)\mapinfo\common\mistyles.jar;$(EXTLIB)\mapinfo\common\mapinfo\commons-logging.jar;$(EXTLIB)\mapinfo\common\mxjgeom.jar;$(EXTLIB)\mapinfo\common\xmlParserAPIs.jar;$(EXTLIB)\mapinfo\common\xml-apis.jar;$(EXTLIB)\mapinfo\common\xercesImpl.jar;$(EXTLIB)\mapinfo\common\mxj.jar;$(EXTLIB)\mapinfo\common\mxjdtds.jar;$(EXTLIB)\mapinfo\common\mxjtabdp.jar;$(EXTLIB)\mapinfo\common\mxjoradp.jar;$(EXTLIB)\mapinfo\common\mxjsqlsvrdp.jar;$(EXTLIB)\mapinfo\common\mxjiusdp.jar;$(EXTLIB)\mapinfo\common\mxjdb2dp.jar;$(EXTLIB)\mapinfo\common\mxjrasterdp.jar;$(EXTLIB)\mapinfo\common\mxjotherdp.jar;$(EXTLIB)\mapinfo\common\mxjwmsdp.jar;$(EXTLIB)\mapinfo\client\rjsclient.jar;$(EXTLIB)\mapinfo\client\previewgifs.jar;$(EXTLIB)\mapinfo\client\mmjclient.jar;$(EXTLIB)\mapinfo\client\mxjclient.jar;$(EXTLIB)\mapinfo\client\mxjbeans.jar;$(EXTLIB)\mapinfo\client\mxjmanager.jar;$(EXTLIB)\mapinfo\client\mxjloc.jar;$(EXTLIB)\mapinfo\client\mxjdevsup.jar;$(EXTLIB)\mapinfo\client\mxjclientsamples.jar;$(EXTLIB)\mapinfo\client\miappletsup.jar;$(EXTLIB)\mapinfo\mapinfo\client
# mxj.jar;$(EXTLIB)\miutil.jar;$(EXTLIB)\mxjclient.jar;$(EXTLIB)\mxjbeans.jar;$(EXTLIB)\micsys.jar

CLASSPATH=$(SERVERCP);$(CLIENTCP);$(LAYOUTCP);$(REPORTCP);$(JGRAPHCP);$(SPATIALCP);$(MAPINFOCP)

.PHONY:	$(TARGET)

$(TARGET):	clean impl jar

jar:
	$(JAR) -cf $(TARGET) -C $(CLASSES) com
	$(JAR) -cf $(TARGET_SRC) -C $(SRC) com

impl:
	$(COMPILER) -d $(CLASSES) \
		-classpath $(CLASSPATH) \
		-sourcepath $(SRC) \
		$(SRC)\com\syrus\AMFICOM\Client\Map\Mapinfo\*.java

clean:
	rm -rf $(CLASSES)\com
	rm -f $(TARGET) $(TARGET_SRC)
